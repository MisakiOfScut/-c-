# 项目设计说明

## 项目名：坦克大战(BattleCity)

### 项目功能：

    坦克移动、发射炮弹、碰撞检测、地图破坏、吃道具（子弹或车身碰撞道具）、计分计血、坦克对战

### 开发技术：
    CUI，使用了部分Windows API函数。图像实现的原理是通过API函数来设置控制台光标位置，在指定的地方（根据坐标）输出图形，
    要擦除图像则直接在指定位置打印空字符即可。地图则通过二维数组存储。

    图像实现的关键函数： void DrawObject::paint(int nX, int nY, const char* psz, WORD wArr)

### 下面简单叙述一下游戏中对象移动是如何实现的：

    这个游戏是单线程的，也就是说程序一次只处理一个对象。以坦克为例说明对象移动是怎么实现的。处理一个坦克对象时先删除其图像和它在
    地图对象中的值，然后根据输入得到它移动后的坐标值，再根据新坐标值将它的值重新写入地图和打印它的图像。子弹的处理流程基本相同。
    而图像的刷新频率借由函数GetTickCount()（获取从程序运行开始经过的毫秒数）实现，规定每经过多少秒程序就执行一次上述处理对象的流程。

### 模块说明：

    项目分为3大模块。第一大模块是DrawObject类，负责打印和擦除图像。第二大模块是Map、Tank和Bullet类，这几个类的对象根据
    输入等完成自身数字（逻辑）层面上的图像的变化（坐标变化），再通过DrawObject类的对象打印自己的图像。第三大模块是MainWindow类，
    这个类定义了窗口、界面以及实现游戏进程的一系列函数。

### 项目测试：
    游戏运行流畅且运行过程中没有出Bug，不过使用的PlaySound播放音乐函数有时会出现不播放音乐或者有延迟的情况，个人分析是
    因为设置的PlaySound函数一次只能播放一个音乐的原因。

### 开发感想及评价：

    因为自己对游戏感兴趣一点所以选择了做坦克大战，虽然说一开始是完全无从下手甚至想放弃的换个项目的，很庆幸最终坚持了下来做了自己
    喜欢的东西。最开始就想着先做最简单的地图就一步步往下做了。期间碰到的Bug也不少啊，犯得最大的错误就是把二维数组地图中的坐标
    转换到COORD坐标时横纵坐标混淆了，导致后面找错误花了很长时间。其他还有很多小的错误就不说了。虽然说做得过程不轻松，但是当看到
    做得坦克真的动了起来还是很开兴的。
    当然这个项目还有很多要不足，看到别人的项目之后觉得还有很多功能是可以做的，例如保存游戏、编辑地图、排行榜这样的功能完全可以做。
    还有就是没有用到GUI，导致这个游戏看起来简陋了点。

### 使用说明书

	打开Debug文件夹执行exe文件进入游戏，按1选择单人模式，2选择双人对战模式。进入游戏后，坦克类型说明和玩家坦克血量在右方。
    游戏中按ESC可以退回开始界面。开始界面按Esc可退出游戏。
    单人模式下wasd控制方向，空格发射炮弹，击杀所有敌人坦克获胜，或者基地（蓝色星星）被击毁或玩家死亡则失败。
    双人模式下玩家一（蓝色坦克）wasd控制方向，空格发射炮弹。玩家二方向键控制方向，右Ctrl按键发射炮弹。
    蓝色坦克方基地被击毁或自身死亡失败，击毁玩家二坦克获胜。
